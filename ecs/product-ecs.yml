{
	"AWSTemplateFormatVersion": "2010-09-09",
	"Description": "The template used to create an ECS Service from the ECS Console.",
	"Parameters": {
		"ECSClusterName": {
			"Type": "String",
			"Default": "Cluster_Name"
		},
		"ECSServiceName": {
			"Type": "String",
			"Default": "product-service-Cluster_Service_Name"
		},
		"SecurityGroupIDs": {
			"Type": "CommaDelimitedList",
			"Default": "Your_Security_Group_Name"
		},
		"SubnetIDs": {
			"Type": "CommaDelimitedList",
			"Default": "subnet-0281215f1fcb7d838,subnet-0682ca29ea20e6aa0,subnet-0b58b52f96fe9e6f4"
		},
		"VpcID": {
			"Type": "String",
			"Default": "Your_VPC"
		},
		"LoadBalancerName": {
			"Type": "String",
			"Default": "ALB_Name"
		}
	},
	"Resources": {
		"ECSService": {
			"Type": "AWS::ECS::Service",
			"Properties": {
				"Cluster": "Cluster_Name",
				"CapacityProviderStrategy": [
					{
						"CapacityProvider": "FARGATE",
						"Base": 0,
						"Weight": 1
					}
				],
				"TaskDefinition": "arn:aws:ecs:eu-west-1:AWS_Account_ID:task-definition/product-service:1",
				"ServiceName": "product-service-Cluster_Service_Name",
				"SchedulingStrategy": "REPLICA",
				"DesiredCount": 1,
				"AvailabilityZoneRebalancing": "ENABLED",
				"LoadBalancers": [
					{
						"ContainerName": "product-service",
						"ContainerPort": 5001,
						"LoadBalancerName": {
							"Ref": "AWS::NoValue"
						},
						"TargetGroupArn": "arn:aws:elasticloadbalancing:eu-west-1:AWS_Account_ID:targetgroup/tg-products/c81deb0e68bd14dc"
					}
				],
				"NetworkConfiguration": {
					"AwsvpcConfiguration": {
						"AssignPublicIp": "ENABLED",
						"SecurityGroups": {
							"Ref": "SecurityGroupIDs"
						},
						"Subnets": {
							"Ref": "SubnetIDs"
						}
					}
				},
				"PlatformVersion": "LATEST",
				"DeploymentConfiguration": {
					"DeploymentCircuitBreaker": {
						"Enable": true,
						"Rollback": true
					},
					"Strategy": "ROLLING",
					"MaximumPercent": 200,
					"MinimumHealthyPercent": 100
				},
				"DeploymentController": {
					"Type": "ECS"
				},
				"ServiceConnectConfiguration": {
					"Enabled": false
				},
				"Tags": [],
				"EnableECSManagedTags": true,
				"EnableExecuteCommand": false
			}
		}
	},
	"Outputs": {
		"ClusterName": {
			"Description": "The cluster used to create the service.",
			"Value": {
				"Ref": "ECSClusterName"
			}
		},
		"ECSService": {
			"Description": "The created service.",
			"Value": {
				"Ref": "ECSService"
			}
		}
	}
}
